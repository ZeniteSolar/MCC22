Version 4
SHEET 1 3748 3988
WIRE 64 -464 -64 -464
WIRE 224 -464 144 -464
WIRE 672 -464 544 -464
WIRE 832 -464 752 -464
WIRE -64 -400 -64 -464
WIRE 224 -400 224 -464
WIRE 544 -400 544 -464
WIRE 832 -400 832 -464
WIRE -64 -256 -64 -320
WIRE -32 -256 -64 -256
WIRE 224 -256 224 -336
WIRE 224 -256 -32 -256
WIRE 544 -256 544 -320
WIRE 576 -256 544 -256
WIRE 832 -256 832 -336
WIRE 832 -256 576 -256
WIRE 16 -48 -16 -48
WIRE 496 -48 480 -48
WIRE -160 -32 -160 -64
WIRE 304 -32 304 -64
WIRE -16 0 -16 -48
WIRE 0 0 -16 0
WIRE 48 0 48 -48
WIRE 480 0 480 -48
WIRE 528 0 528 -48
WIRE -160 48 -160 32
WIRE -80 48 -160 48
WIRE -16 48 -80 48
WIRE 112 48 64 48
WIRE 208 48 176 48
WIRE 304 48 304 32
WIRE 384 48 304 48
WIRE 464 48 384 48
WIRE 624 48 544 48
WIRE 720 48 688 48
WIRE -160 64 -160 48
WIRE 304 64 304 48
WIRE -80 80 -80 48
WIRE 384 80 384 48
WIRE -160 176 -160 144
WIRE -80 176 -80 144
WIRE -80 176 -160 176
WIRE 304 176 304 144
WIRE 384 176 384 144
WIRE 384 176 304 176
WIRE 64 320 16 320
WIRE -1344 368 -1360 368
WIRE -1184 368 -1200 368
WIRE 32 368 0 368
WIRE 48 368 32 368
WIRE 176 368 144 368
WIRE 208 368 176 368
WIRE -624 384 -624 368
WIRE -496 384 -496 368
WIRE -1440 416 -1488 416
WIRE -1360 416 -1360 368
WIRE -1360 416 -1440 416
WIRE -1184 416 -1184 368
WIRE -1152 416 -1184 416
WIRE -1120 416 -1152 416
WIRE 128 432 128 400
WIRE -1152 448 -1152 416
WIRE 64 448 64 400
WIRE 592 448 288 448
WIRE 960 448 656 448
WIRE -1488 464 -1488 416
WIRE -1360 464 -1360 416
WIRE -1344 464 -1360 464
WIRE -1184 464 -1184 416
WIRE -1184 464 -1200 464
WIRE -624 480 -624 464
WIRE -624 480 -640 480
WIRE -496 480 -496 464
WIRE -496 480 -512 480
WIRE -624 496 -624 480
WIRE -496 496 -496 480
WIRE 288 512 288 448
WIRE 960 512 960 448
WIRE -1488 560 -1488 496
WIRE -1152 560 -1152 528
WIRE -1152 560 -1488 560
WIRE -1120 560 -1152 560
WIRE 416 576 368 576
WIRE 816 576 800 576
WIRE 288 624 288 544
WIRE 320 624 288 624
WIRE 384 624 352 624
WIRE 400 624 384 624
WIRE 528 624 496 624
WIRE 560 624 528 624
WIRE 624 624 592 624
WIRE 656 624 624 624
WIRE 720 624 688 624
WIRE 784 624 752 624
WIRE 800 624 800 576
WIRE 800 624 784 624
WIRE 816 624 800 624
WIRE 880 624 880 576
WIRE 928 624 880 624
WIRE 960 624 960 544
WIRE 960 624 928 624
WIRE 480 688 480 656
WIRE 880 688 880 656
WIRE 416 704 416 656
WIRE 816 704 816 656
WIRE -976 768 -1008 768
WIRE -880 768 -896 768
WIRE -656 768 -688 768
WIRE -560 768 -576 768
WIRE 48 768 -128 768
WIRE 128 768 48 768
WIRE 176 768 128 768
WIRE 288 768 288 624
WIRE 288 768 256 768
WIRE 960 768 960 624
WIRE 992 768 960 768
WIRE 1120 768 1072 768
WIRE 1168 768 1120 768
WIRE 1296 768 1168 768
WIRE 1344 768 1296 768
WIRE 1472 768 1424 768
WIRE 48 800 48 768
WIRE 1296 800 1296 768
WIRE -1008 816 -1008 768
WIRE -560 816 -560 768
WIRE 128 848 128 768
WIRE 1120 848 1120 768
WIRE 1168 848 1168 768
WIRE 48 864 48 832
WIRE 64 864 48 864
WIRE 1296 864 1296 832
WIRE 1296 864 1280 864
WIRE 64 896 48 896
WIRE 1296 896 1280 896
WIRE -1008 928 -1008 896
WIRE -880 928 -1008 928
WIRE -560 928 -560 896
WIRE -560 928 -688 928
WIRE -80 1008 -128 1008
WIRE 48 1008 48 896
WIRE 48 1008 0 1008
WIRE 128 1008 128 912
WIRE 128 1008 48 1008
WIRE 624 1008 624 624
WIRE 624 1008 128 1008
WIRE 1120 1008 1120 912
WIRE 1120 1008 624 1008
WIRE 1168 1008 1168 912
WIRE 1168 1008 1120 1008
WIRE 1296 1008 1296 896
WIRE 1296 1008 1168 1008
WIRE 1456 1008 1296 1008
WIRE 1472 1008 1456 1008
WIRE 1456 1040 1456 1008
WIRE -224 1536 -320 1536
WIRE -64 1536 -144 1536
WIRE 144 1536 48 1536
WIRE 304 1536 224 1536
WIRE 512 1536 416 1536
WIRE 672 1536 592 1536
WIRE -320 1584 -320 1536
WIRE 48 1584 48 1536
WIRE 416 1584 416 1536
WIRE -64 1600 -64 1536
WIRE 304 1600 304 1536
WIRE 672 1600 672 1536
WIRE -1312 1648 -1360 1648
WIRE -1136 1648 -1184 1648
WIRE -1360 1696 -1408 1696
WIRE -320 1696 -320 1664
WIRE -64 1696 -64 1664
WIRE -64 1696 -320 1696
WIRE 48 1696 48 1664
WIRE 304 1696 304 1664
WIRE 304 1696 48 1696
WIRE 416 1696 416 1664
WIRE 672 1696 672 1664
WIRE 672 1696 416 1696
WIRE -1408 1728 -1440 1728
WIRE -1360 1728 -1360 1696
WIRE -320 1728 -320 1696
WIRE 48 1728 48 1696
WIRE 416 1728 416 1696
WIRE -1440 1776 -1440 1728
WIRE -1440 1776 -1488 1776
WIRE -1424 1776 -1440 1776
WIRE -1312 1776 -1312 1648
WIRE -1312 1776 -1344 1776
WIRE -1264 1776 -1312 1776
WIRE -1136 1776 -1136 1648
WIRE -1136 1776 -1184 1776
WIRE -1104 1776 -1136 1776
WIRE -992 1776 -1024 1776
WIRE -224 1792 -320 1792
WIRE -64 1792 -144 1792
WIRE 144 1792 48 1792
WIRE 304 1792 224 1792
WIRE 512 1792 416 1792
WIRE 672 1792 592 1792
WIRE -320 1840 -320 1792
WIRE 48 1840 48 1792
WIRE 416 1840 416 1792
WIRE -1312 1856 -1360 1856
WIRE -1136 1856 -1184 1856
WIRE -64 1856 -64 1792
WIRE 304 1856 304 1792
WIRE 672 1856 672 1792
WIRE -1360 1904 -1408 1904
WIRE -1408 1936 -1440 1936
WIRE -1360 1936 -1360 1904
WIRE -320 1952 -320 1920
WIRE -64 1952 -64 1920
WIRE -64 1952 -320 1952
WIRE 48 1952 48 1920
WIRE 304 1952 304 1920
WIRE 304 1952 48 1952
WIRE 416 1952 416 1920
WIRE 672 1952 672 1920
WIRE 672 1952 416 1952
WIRE -1440 1984 -1440 1936
WIRE -1440 1984 -1488 1984
WIRE -1424 1984 -1440 1984
WIRE -1312 1984 -1312 1856
WIRE -1312 1984 -1344 1984
WIRE -1264 1984 -1312 1984
WIRE -1136 1984 -1136 1856
WIRE -1136 1984 -1184 1984
WIRE -1104 1984 -1136 1984
WIRE -320 1984 -320 1952
WIRE 48 1984 48 1952
WIRE 416 1984 416 1952
WIRE -896 2032 -944 2032
WIRE 144 2048 48 2048
WIRE 304 2048 224 2048
WIRE 512 2048 416 2048
WIRE 672 2048 592 2048
WIRE -224 2064 -320 2064
WIRE -64 2064 -144 2064
WIRE -1312 2080 -1360 2080
WIRE -1136 2080 -1184 2080
WIRE -784 2080 -816 2080
WIRE 48 2096 48 2048
WIRE 416 2096 416 2048
WIRE -320 2112 -320 2064
WIRE 304 2112 304 2048
WIRE 672 2112 672 2048
WIRE -1360 2128 -1408 2128
WIRE -64 2128 -64 2064
WIRE -1408 2160 -1440 2160
WIRE -1360 2160 -1360 2128
WIRE -1440 2208 -1440 2160
WIRE -1440 2208 -1488 2208
WIRE -1424 2208 -1440 2208
WIRE -1312 2208 -1312 2080
WIRE -1312 2208 -1344 2208
WIRE -1264 2208 -1312 2208
WIRE -1136 2208 -1136 2080
WIRE -1136 2208 -1184 2208
WIRE -1104 2208 -1136 2208
WIRE -992 2208 -992 1776
WIRE -992 2208 -1024 2208
WIRE -944 2208 -944 2032
WIRE -944 2208 -992 2208
WIRE -896 2208 -944 2208
WIRE -784 2208 -784 2080
WIRE -784 2208 -816 2208
WIRE -752 2208 -784 2208
WIRE -624 2208 -672 2208
WIRE -544 2208 -624 2208
WIRE 48 2208 48 2176
WIRE 304 2208 304 2176
WIRE 304 2208 48 2208
WIRE 416 2208 416 2176
WIRE 672 2208 672 2176
WIRE 672 2208 416 2208
WIRE -320 2224 -320 2192
WIRE -64 2224 -64 2192
WIRE -64 2224 -320 2224
WIRE 48 2240 48 2208
WIRE 416 2240 416 2208
WIRE -320 2256 -320 2224
WIRE -1312 2288 -1360 2288
WIRE -1136 2288 -1184 2288
WIRE 144 2304 48 2304
WIRE 304 2304 224 2304
WIRE -224 2320 -320 2320
WIRE -64 2320 -144 2320
WIRE -1360 2336 -1408 2336
WIRE -944 2336 -944 2208
WIRE -816 2336 -944 2336
WIRE -624 2336 -624 2208
WIRE -624 2336 -752 2336
WIRE 48 2352 48 2304
WIRE -1408 2368 -1440 2368
WIRE -1360 2368 -1360 2336
WIRE -320 2368 -320 2320
WIRE 304 2368 304 2304
WIRE -64 2384 -64 2320
WIRE -1440 2416 -1440 2368
WIRE -1440 2416 -1488 2416
WIRE -1424 2416 -1440 2416
WIRE -1312 2416 -1312 2288
WIRE -1312 2416 -1344 2416
WIRE -1264 2416 -1312 2416
WIRE -1136 2416 -1136 2288
WIRE -1136 2416 -1184 2416
WIRE -1104 2416 -1136 2416
WIRE -992 2416 -992 2208
WIRE 48 2464 48 2432
WIRE 304 2464 304 2432
WIRE 304 2464 48 2464
WIRE -320 2480 -320 2448
WIRE -64 2480 -64 2448
WIRE -64 2480 -320 2480
WIRE 48 2496 48 2464
WIRE -320 2512 -320 2480
WIRE -224 2560 -320 2560
WIRE -64 2560 -144 2560
WIRE 144 2560 48 2560
WIRE 304 2560 224 2560
WIRE 512 2560 416 2560
WIRE 672 2560 592 2560
WIRE -320 2608 -320 2560
WIRE 48 2608 48 2560
WIRE 416 2608 416 2560
WIRE -64 2624 -64 2560
WIRE 304 2624 304 2560
WIRE 672 2624 672 2560
WIRE -1184 2704 -1264 2704
WIRE -1072 2704 -1104 2704
WIRE -320 2720 -320 2688
WIRE -64 2720 -64 2688
WIRE -64 2720 -320 2720
WIRE 48 2720 48 2688
WIRE 304 2720 304 2688
WIRE 304 2720 48 2720
WIRE 416 2720 416 2688
WIRE 672 2720 672 2688
WIRE 672 2720 416 2720
WIRE -976 2736 -1024 2736
WIRE -320 2752 -320 2720
WIRE 48 2752 48 2720
WIRE 416 2752 416 2720
WIRE -1184 2784 -1264 2784
WIRE -1072 2784 -1072 2704
WIRE -1072 2784 -1104 2784
WIRE -864 2784 -896 2784
WIRE -1184 2912 -1264 2912
WIRE -1072 2912 -1072 2784
WIRE -1072 2912 -1104 2912
WIRE -1024 2912 -1024 2736
WIRE -1024 2912 -1072 2912
WIRE -976 2912 -1024 2912
WIRE -864 2912 -864 2784
WIRE -864 2912 -896 2912
WIRE -832 2912 -864 2912
WIRE -624 2912 -704 2912
WIRE -1184 2992 -1264 2992
WIRE -1072 2992 -1072 2912
WIRE -1072 2992 -1104 2992
WIRE -1024 3040 -1024 2912
WIRE -896 3040 -1024 3040
WIRE -704 3040 -704 2912
WIRE -704 3040 -832 3040
FLAG -1120 416 G
FLAG -1120 560 S
FLAG -128 1008 IN+
IOPIN -128 1008 In
FLAG -128 768 IN-
IOPIN -128 768 In
FLAG 384 624 S
FLAG 528 624 D
FLAG 1472 1008 OUT-
IOPIN 1472 1008 In
FLAG 1472 768 OUT+
IOPIN 1472 768 In
FLAG 1456 1040 0
FLAG 368 576 G
FLAG -880 768 IN+
IOPIN -880 768 In
FLAG -880 928 IN-
IOPIN -880 928 In
FLAG -688 928 OUT-
IOPIN -688 928 In
FLAG -688 768 OUT+
IOPIN -688 768 In
FLAG 48 2240 0
FLAG 48 2496 0
FLAG 304 2304 Pout
FLAG 304 2048 Pin
FLAG 48 2752 0
FLAG 304 2560 Eff
FLAG -320 1728 0
FLAG -64 1536 Pmos
FLAG -320 1984 0
FLAG -64 1792 Pdiode
FLAG 48 1728 0
FLAG 304 1536 PLi
FLAG 48 1984 0
FLAG 304 1792 PLo
FLAG -320 2256 0
FLAG -64 2064 PCi
FLAG -320 2512 0
FLAG -64 2320 PCc
FLAG -320 2752 0
FLAG -64 2560 PCo
FLAG -1440 416 driver_out
FLAG -896 2032 HeatSink
FLAG -544 2208 0
FLAG -1488 1776 0
FLAG -1184 1648 M1Case1
FLAG -1360 1648 M1Junction1
FLAG -1408 1696 Pmos
FLAG -1488 2208 0
FLAG -1184 2080 M1Case1
FLAG -1360 2080 M2Junction1
FLAG -1408 2128 Pdiode
FLAG -816 2080 Amb
FLAG 416 2752 0
FLAG 672 2560 Ploss
FLAG 416 1728 0
FLAG 672 1536 PsbubMos
FLAG -640 480 snb_M1
FLAG -512 480 snb_M2
FLAG 416 1984 0
FLAG 672 1792 PsbubDiode
FLAG 416 2240 0
FLAG 672 2048 Pshunts
FLAG -1488 2416 0
FLAG -1360 2288 M2Junction2
FLAG -1408 2336 Pdiode
FLAG -1184 2288 M1Case2
FLAG -1488 1984 0
FLAG -1184 1856 M1Case2
FLAG -1360 1856 M1Junction2
FLAG -1408 1904 Pmos
FLAG -624 560 S
FLAG -496 560 A
FLAG -496 368 K
FLAG -624 368 D
FLAG 784 624 A
FLAG 928 624 K
FLAG -976 2736 HeatSink2
FLAG -1264 2704 M1Case1_
FLAG -1264 2912 M2Case1_
FLAG -896 2784 Amb
FLAG -624 2912 0
FLAG 416 704 M1Case1_
FLAG 816 704 M2Case1_
FLAG 480 688 M1Junction1
FLAG 880 688 M2Junction1
FLAG 32 368 S
FLAG 176 368 D
FLAG 16 320 G
FLAG 64 448 M1Case2_
FLAG 128 432 M1Junction2
FLAG -1264 2992 M2Case2_
FLAG -1264 2784 M1Case2_
FLAG -160 -64 S
FLAG -160 176 D
FLAG 208 48 K
FLAG 304 -64 K
FLAG 304 176 A
FLAG 720 48 S
FLAG -32 -256 0
FLAG 576 -256 0
FLAG 224 -464 P_snb_mos
FLAG 832 -464 P_snb_diode
SYMBOL diode -1344 480 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL diode -1200 352 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL res -1184 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 4.7
SYMBOL res -1248 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 4.7
SYMBOL res -1168 432 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res -576 800 R0
SYMATTR InstName Rout
SYMATTR Value {Ro}
SYMBOL res -640 368 R0
SYMATTR InstName Rs_M1
SYMATTR Value {Rs}
SYMBOL cap -640 496 R0
SYMATTR InstName Cs_M1
SYMATTR Value {Cs}
SYMATTR SpiceLine Rser={Cs_esr}
SYMBOL ind2 272 784 M270
WINDOW 39 36 108 Left 2
WINDOW 40 36 136 Left 2
SYMATTR SpiceLine Rser={Li_esr}
SYMATTR SpiceLine2 IC={Ii}
SYMATTR InstName Li
SYMATTR Value {Li}
SYMATTR Type ind
SYMBOL cap 112 912 M180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 0
WINDOW 39 24 -17 Left 0
WINDOW 40 24 -43 Left 0
SYMATTR InstName Ci
SYMATTR Value {Ci}
SYMATTR SpiceLine Rser={Ci_esr}
SYMATTR SpiceLine2 IC={Vi}
SYMBOL ind2 976 784 R270
WINDOW 39 36 108 Left 2
WINDOW 40 36 136 Left 2
SYMATTR SpiceLine Rser={Lo_esr}
SYMATTR SpiceLine2 IC={0.95*Io}
SYMATTR InstName Lo
SYMATTR Value {Lo}
SYMATTR Type ind
SYMBOL polcap 1136 848 M0
WINDOW 39 28 81 Left 0
WINDOW 40 28 102 Left 0
WINDOW 3 24 56 Left 0
SYMATTR SpiceLine V=100 Rser={Co_esr} Lser=0
SYMATTR SpiceLine2 IC={0.95*Vo}
SYMATTR Value {Co}
SYMATTR InstName Co
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL cap 656 464 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 0
WINDOW 39 -28 32 VBottom 0
WINDOW 40 -56 32 VBottom 0
SYMATTR InstName Cc
SYMATTR Value {Cc}
SYMATTR SpiceLine Rser={Cc_esr}
SYMATTR SpiceLine2 IC={0.95*(Vi+Vo)}
SYMBOL res 1440 752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RshuntOut
SYMATTR Value 1500µ
SYMBOL res -96 1024 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RshuntIn
SYMATTR Value 1000µ
SYMBOL MiniSyms4\\voltage- -1488 480 R0
WINDOW 3 -18 -90 VRight 0
WINDOW 123 0 0 Left 0
WINDOW 39 7 17 Left 0
SYMATTR Value PULSE(0 15 0 1n 1n {D*Tsw} {Tsw})
SYMATTR SpiceLine Rser=100m Cpar=100n
SYMATTR InstName Driver
SYMBOL MiniSyms4\\res- 48 816 R180
WINDOW 3 9 -8 Left 0
WINDOW 0 13 9 Center 0
SYMATTR Value 10k
SYMATTR InstName R12
SYMBOL MiniSyms4\\res- 48 880 R180
WINDOW 3 9 -8 Left 0
WINDOW 0 13 9 Center 0
SYMATTR Value 1k
SYMATTR InstName R15
SYMBOL MiniSyms4\\res- 1296 816 R180
WINDOW 3 9 -8 Left 0
WINDOW 0 13 9 Center 0
SYMATTR Value 47k
SYMATTR InstName R27
SYMBOL MiniSyms4\\res- 1296 880 R180
WINDOW 3 9 -8 Left 0
WINDOW 0 13 9 Center 0
SYMATTR Value 1k
SYMATTR InstName R28
SYMBOL voltage -992 768 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 4 56 VTop 2
WINDOW 123 0 0 Left 0
SYMATTR InstName In
SYMATTR Value 0
SYMATTR SpiceLine Rser=0 Cpar=0
SYMBOL voltage -672 768 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 4 56 VTop 2
WINDOW 123 0 0 Left 0
SYMATTR InstName Out
SYMATTR Value 0
SYMATTR SpiceLine Rser=0 Cpar=0
SYMBOL bv 48 2080 R0
SYMATTR InstName B1
SYMATTR Value V=I(In)*V(IN+,IN-)
SYMBOL res 240 2032 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 160
SYMBOL cap 288 2112 R0
SYMATTR InstName C7
SYMATTR Value 1µ
SYMBOL bv 48 2336 R0
SYMATTR InstName B2
SYMATTR Value V=I(Out)*V(OUT+)
SYMBOL res 240 2288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R37
SYMATTR Value 160
SYMBOL cap 288 2368 R0
SYMATTR InstName C10
SYMATTR Value 1µ
SYMBOL bv 48 2592 R0
SYMATTR InstName B3
SYMATTR Value V=V(Pout)/V(Pin)
SYMBOL res 240 2544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R38
SYMATTR Value 160
SYMBOL cap 288 2624 R0
SYMATTR InstName C11
SYMATTR Value 10n
SYMBOL bv -320 1568 R0
WINDOW 3 24 96 Left 1
SYMATTR Value V=I(M1)*V(D,S)
SYMATTR InstName B4
SYMBOL res -128 1520 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R39
SYMATTR Value 160
SYMBOL cap -80 1600 R0
SYMATTR InstName C16
SYMATTR Value 1µ
SYMBOL bv -320 1824 R0
WINDOW 3 24 96 Left 1
SYMATTR Value V=I(M2)*V(K,D)
SYMATTR InstName B5
SYMBOL res -128 1776 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R40
SYMATTR Value 160
SYMBOL cap -80 1856 R0
SYMATTR InstName C17
SYMATTR Value 1µ
SYMBOL bv 48 1568 R0
WINDOW 3 24 96 Left 1
SYMATTR Value V=V(S,IN-)*I(Li)
SYMATTR InstName B6
SYMBOL res 240 1520 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R41
SYMATTR Value 160
SYMBOL cap 288 1600 R0
SYMATTR InstName C18
SYMATTR Value 1µ
SYMBOL bv 48 1824 R0
WINDOW 3 24 96 Left 1
SYMATTR Value V=V(K,OUT+)*I(Lo)
SYMATTR InstName B7
SYMBOL res 240 1776 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R42
SYMATTR Value 160
SYMBOL cap 288 1856 R0
SYMATTR InstName C19
SYMATTR Value 1µ
SYMBOL bv -320 2096 R0
WINDOW 3 24 96 Left 1
SYMATTR Value V=V(IN-,IN+)*I(Ci)
SYMATTR InstName B8
SYMBOL res -128 2048 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R43
SYMATTR Value 160
SYMBOL cap -80 2128 R0
SYMATTR InstName C8
SYMATTR Value 1µ
SYMBOL bv -320 2352 R0
WINDOW 3 24 96 Left 1
SYMATTR Value V=V(K,S)*I(Cc)
SYMATTR InstName B9
SYMBOL res -128 2304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R44
SYMATTR Value 160
SYMBOL cap -80 2384 R0
SYMATTR InstName C9
SYMATTR Value 1µ
SYMBOL bv -320 2592 R0
WINDOW 3 24 96 Left 1
SYMATTR Value V=V(OUT+)*I(Co)
SYMATTR InstName B10
SYMBOL res -128 2544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R45
SYMATTR Value 160
SYMBOL cap -80 2624 R0
SYMATTR InstName C20
SYMATTR Value 1µ
SYMBOL voltage -768 2208 R270
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0 Cpar=0
SYMATTR InstName Amb
SYMATTR Value {temp}
SYMBOL cap -816 2352 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName Cthsa
SYMATTR Value 300n
SYMBOL MiniSyms4\\voltage- 336 624 R90
WINDOW 3 7 17 Left 0
WINDOW 123 0 0 Left 0
SYMATTR Value 0
SYMATTR SpiceLine Rser=0 Cpar=0
SYMATTR InstName M1
SYMBOL MiniSyms4\\voltage- 736 624 R90
WINDOW 3 7 17 Left 0
WINDOW 123 0 0 Left 0
SYMATTR Value 0
SYMATTR SpiceLine Rser=0 Cpar=0
SYMATTR InstName M2
SYMBOL res -1168 1760 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RthJC1
SYMATTR Value 0.9
SYMBOL res -1008 1760 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RthCS1
SYMATTR Value 2
SYMBOL g -1328 1776 R90
WINDOW 0 34 27 VLeft 2
WINDOW 3 35 103 VLeft 2
SYMATTR InstName G1
SYMATTR Value 1
SYMBOL res -1168 2192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RthJC2
SYMATTR Value 1.6
SYMBOL res -1008 2192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RthCS2
SYMATTR Value 2
SYMBOL g -1328 2208 R90
WINDOW 0 34 27 VLeft 2
WINDOW 3 35 103 VLeft 2
SYMATTR InstName G2
SYMATTR Value 1
SYMBOL res -800 2192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RthSA
SYMATTR Value 10
SYMBOL bv 416 2592 R0
WINDOW 3 24 96 Left 1
SYMATTR Value V=V(Pmos)+V(Pdiode)+V(PLi)+V(PLo)+V(PCi)+V(PCc)+V(PCo)+V(PsbubMos)+V(PsbubDiode)
SYMATTR InstName B11
SYMBOL res 608 2544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 160
SYMBOL cap 656 2624 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL bv 416 1568 R0
WINDOW 3 24 96 Left 1
SYMATTR Value V=V(S,snb_M1)*I(Rs_M1)+V(snb_M1,D)*I(Cs_M1)
SYMATTR InstName B12
SYMBOL res 608 1520 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 160
SYMBOL cap 656 1600 R0
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL res -512 368 R0
SYMATTR InstName Rs_M2
SYMATTR Value {Rs}
SYMBOL cap -512 496 R0
SYMATTR InstName Cs_M2
SYMATTR Value {Cs}
SYMATTR SpiceLine Rser={Cs_esr}
SYMBOL bv 416 1824 R0
WINDOW 3 24 96 Left 1
SYMATTR Value V=V(K,snb_M2)*I(Rs_M2)+V(snb_M2,A)*I(Cs_M2)
SYMATTR InstName B13
SYMBOL res 608 1776 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 160
SYMBOL cap 656 1856 R0
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL bv 416 2080 R0
WINDOW 3 24 96 Left 1
SYMATTR Value V=-V(D)*I(RshuntOut)+V(IN+,D)*I(RshuntIn)
SYMATTR InstName B14
SYMBOL res 608 2032 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 160
SYMBOL cap 656 2112 R0
SYMATTR InstName C4
SYMATTR Value 1µ
SYMBOL g -1328 2416 R90
WINDOW 0 34 27 VLeft 2
WINDOW 3 35 103 VLeft 2
SYMATTR InstName G3
SYMATTR Value 0.5
SYMBOL res -1168 2400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RthJC3
SYMATTR Value 1.6
SYMBOL res -1008 2400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RthCS5
SYMATTR Value 2
SYMBOL optimos_5 496 576 R90
WINDOW 0 5 -29 VRight 2
WINDOW 3 57 13 VRight 0
SYMATTR InstName U1
SYMATTR Value BSC093N15NS5
SYMBOL res -1168 1968 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RthJC4
SYMATTR Value 0.9
SYMBOL res -1008 1968 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RthCS6
SYMATTR Value 2
SYMBOL g -1328 1984 R90
WINDOW 0 34 27 VLeft 2
WINDOW 3 35 103 VLeft 2
SYMATTR InstName G4
SYMATTR Value 0.5
SYMBOL cap 1152 848 R0
WINDOW 3 24 56 Left 0
SYMATTR Value {10u * 0.2 * 4}
SYMATTR InstName Co_cer
SYMATTR SpiceLine Rser={3m / 4}
SYMBOL cap -896 3056 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName Cthsa1
SYMATTR Value 300n
SYMBOL res -1088 2688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RthCS3
SYMATTR Value 2
SYMBOL res -1088 2896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RthCS4
SYMATTR Value 2
SYMBOL res -880 2896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RthSA1
SYMATTR Value 3.5
SYMBOL MiniSyms4\\Ind- 576 624 R90
WINDOW 3 8 0 VTop 0
WINDOW 0 0 0 VBottom 0
SYMATTR Value {l_par/2}
SYMATTR InstName L1
SYMBOL MiniSyms4\\Ind- 672 624 R90
WINDOW 3 8 0 VTop 0
WINDOW 0 0 0 VBottom 0
SYMATTR Value {l_par/2}
SYMATTR InstName L2
SYMBOL schottky 816 640 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value v10p15
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 816 592 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMATTR Value v10p15
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL optimos_5 144 320 R90
WINDOW 0 5 -29 VRight 2
WINDOW 3 57 13 VRight 0
SYMATTR InstName U2
SYMATTR Value BSC093N15NS5
SYMBOL res -1088 2976 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RthCS7
SYMATTR Value 2
SYMBOL res -1088 2768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RthCS8
SYMATTR Value 2
SYMBOL MiniSyms4\\Ind- 288 528 M180
WINDOW 3 8 -8 Left 0
WINDOW 0 26 8 Center 0
SYMATTR Value {l_par}
SYMATTR InstName L3
SYMBOL MiniSyms4\\Ind- 960 528 R180
WINDOW 3 8 -8 Left 0
WINDOW 0 26 8 Center 0
SYMATTR Value {l_par}
SYMATTR InstName L4
SYMBOL voltage -1008 800 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 30
SYMBOL res -176 48 R0
SYMATTR InstName R8
SYMATTR Value {Rsnb}
SYMBOL cap -176 -32 R0
SYMATTR InstName C5
SYMATTR Value {Csnb}
SYMBOL schottky -96 80 R0
SYMATTR InstName D1
SYMATTR Value MBR0520L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 112 64 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D6
SYMATTR Value MBR0520L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 288 48 R0
SYMATTR InstName R9
SYMATTR Value {Rsnb}
SYMBOL cap 288 -32 R0
SYMATTR InstName C6
SYMATTR Value {Csnb}
SYMBOL schottky 368 80 R0
SYMATTR InstName D7
SYMATTR Value MBR0520L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 688 32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D8
SYMATTR Value MBR0520L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL sw 80 48 R90
SYMATTR InstName S1
SYMATTR Value MYSW
SYMBOL sw 560 48 R90
SYMATTR InstName S2
SYMATTR Value MYSW
SYMBOL MiniSyms4\\voltage- 32 -48 R270
WINDOW 0 10 0 VTop 2
WINDOW 3 -10 0 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value {D_snb}
SYMBOL MiniSyms4\\voltage- 512 -48 R270
WINDOW 0 10 0 VTop 2
WINDOW 3 -10 0 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value {D_snb}
SYMBOL bv -64 -416 R0
WINDOW 3 24 96 Left 1
SYMATTR Value V=V(S,N007)*I(C5)+V(N007,D)*I(R8)+V(N007,D)*I(D1)+V(N008,K)*I(D6)
SYMATTR InstName B15
SYMBOL res 160 -480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 160
SYMBOL cap 208 -400 R0
SYMATTR InstName C12
SYMATTR Value 1µ
SYMBOL bv 544 -416 R0
WINDOW 3 24 96 Left 1
SYMATTR Value V=V(N009,A)*I(R9)+V(K,N009)*I(C6)+V(N009,A)*I(D7)+V(S,N010)*I(D8)
SYMATTR InstName B16
SYMBOL res 768 -480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 160
SYMBOL cap 816 -400 R0
SYMATTR InstName C13
SYMATTR Value 1µ
TEXT -728 1208 Left 2 !.param tstart {0}\n.param tend={1.5m}\n.tran 0 {tend} {tstart}
TEXT 456 240 Left 2 ;OUT- Standard Floating Half-Bridge
TEXT -1344 736 Right 2 !.include pvlib.cir
TEXT -1504 968 Left 2 !.param G=1000\n;.step param G list 200 400 600 800 1000 1200
TEXT -1504 1064 Left 2 !; Optimal Operating Point: MPPT\n.param Vi {Vmp}\n.param Ii {Imp}\n.param Pi {Vmp * Imp}\n.param Ri {Vi/Ii}\n.param Eff=1\n.param Po {Eff * (G/1000) * Pi}\n.param Vo {(Po * Ro)**(1/2)}\n.param Io {Vo / Ro}\n.param D={(Vo/(Vi+Vo))}
TEXT -768 976 Left 2 !.param RO=5\n;.step param RO list 5
TEXT -1512 592 Left 2 !;.step param fsw list 40e3 100e3 200e3\n.param fsw=100e3 ; -> optimized for efficiency!\n.param Tsw {1/fsw}
TEXT 2272 488 Left 2 !; Third Experiment - Varying those with the highest impact on efficiency\n;.param Co 4.7u ; Fixed because its impact is very low\n \n;.step param Li list 10u 22u 33u\n;.step param Cc list 1u 2.2u 4.7u\n;.step param Lo list 10u 22u 33u 47u\n \n;.param Li 22u; ->  Optimized for efficiency! \n;.param Cc 1u; -> Optimized for efficiency!\n;.param Lo 47u ; -> Optimized for efficiency!\n \n; Result @ 40khz: (22uH, 1uF, 47uH) is 8.42% better than (33uH, 2.2uF, 10uH)\n; Result @ 100khz: (10uH, 1uF, 10uH) is 4.34% better than (33uH, 1uF, 33uH)\n \n;.step param L list 33u 22u 10u\n.param L 22u\n.param L_esr 13.5m\n \n.param Li {L};\n.param Lo {L};\n.param Ci {22u * 4};\n.param Cc {10u};\n.param Co {22u * 4};\n  \n.param Li_esr {L_esr};\n.param Lo_esr {L_esr};\n.param Ci_esr {45m / 4};\n.param Cc_esr {25m / 15};\n.param Co_esr {38m / 4};
TEXT 3272 480 Left 2 !;.inc FDMS86255.lib\n;.inc OptiMOS3_150V_LTSpice.lib\n.inc OptiMOS5_150V_LTSpice.lib\n;.inc PTNG_150V_std_rev3p6_ltspice.txt
TEXT 3272 608 Left 2 ;BSB165N15NZ3\nBSB280N15NZ3\nBSC074N15NS5\nBSC093N15NS5\nBSC110N15NS5\nBSC160N15NS5\nBSC190N15NS3\nBSC360N15NS3\nBSC520N15NS3\nBSZ300N15NS5\nBSZ300N15NS5\nBSZ520N15NS3\nBSZ900N15NS3\nFDMS8D8N15C_3p\nFDMS8D8N15C_5p\nIPA075N15N3\nIPA105N15N3\nIPB044N15N5\nIPB044N15N5\nIPB048N15N5\nIPB048N15N5\nIPB048N15N5LF\nIPB060N15N5\nIPB060N15N5\nIPB065N15N3\nIPB072N15N3\nIPB073N15N5\nIPB073N15N5\nIPB083N15N5LF\nIPB108N15N3\nIPB200N15N3\nIPB530N15N3\nIPD200N15N3\nIPD530N15N3\nIPI051N15N5\nIPI051N15N5\nIPI075N15N3\nIPI076N15N5\nIPI076N15N5\nIPI111N15N3\nIPI200N15N3\nIPI530N15N3\nIPP051N15N5\nIPP051N15N5\nIPP075N15N3\nIPP076N15N5\nIPP076N15N5\nIPP111N15N3\nIPP200N15N3\nIPP530N15N3\nIPT039N15N5\nIPT039N15N5\nIPT044N15N5\nIPT044N15N5\nIPT054N15N5\nIPT054N15N5\nIPT059N15N3\nIPT063N15N5\nIPT063N15N5\nNTB011N15MC_3P\nNTB011N15MC_5P\nNTB5D0N15MC_3P\nNTB5D0N15MC_5P\nNTB7D3N15MC_3P\nNTB7D3N15MC_5P\nNTBGS4D1N15MC_3P\nNTBGS4D1N15MC_5P\nNTBGS6D5N15MC_3P\nNTBGS6D5N15MC_5P\nNTDS015N15MC_3P\nNTDS015N15MC_5P\nNTMFS011N15MC_3P\nNTMFS011N15MC_5P\nNTMFS015N15MC_3P\nNTMFS015N15MC_5P\nNTMFS022N15MC_3P\nNTMFS022N15MC_5P\nNTMFS034N15MC_3P\nNTMFS034N15MC_5P\nNTMFS7D5N15MC_3P\nNTMFS7D5N15MC_5P\nNTMFSC012N15MC_3P\nNTMFSC012N15MC_5P\nNTMTS4D3N15MC_3P\nNTMTS4D3N15MC_5P\nNTP011N15MC_3P\nNTP011N15MC_5P\nNTP5D0N15MC_3P\nNTP5D0N15MC_5P\nNTP7D3N15MC_3P\nNTP7D3N15MC_5P\nNTTFS022N15MC_3P\nNTTFS022N15MC_5P\nNTTFS034N15MC_3P\nNTTFS034N15MC_5P\nNVBGS4D1N15MC_3P\nNVBGS4D1N15MC_5P\nNVBGS6D5N15MC_3P\nNVBGS6D5N15MC_5P\nNVBLS4D0N15MC_3P\nNVBLS4D0N15MC_5P\nNVDS015N15MC_3P\nNVDS015N15MC_5P
TEXT -1096 1520 Left 2 !.temp 50
TEXT -1504 776 Left 2 !.param Voc 24.9\n.param Isc 9.65\n.param Vmp 20.3\n.param Imp 8.75\n.param tk_voc -0.0031\n.param tk_isc 0.0005
TEXT -1240 1592 Left 2 ;Simplistic linear model, without thermal feedback.
TEXT -1176 1424 Left 3 ;Thermal Design Verification
TEXT 48 1432 Left 3 ;Power Losses Verification
TEXT -904 392 Left 2 !.param Rs {2.5}\n.param Cs={1n}\n.param Cs_esr {3m}
TEXT 408 544 Left 0 ;low-side driver, iso
TEXT 3272 448 Left 2 !.lib p_v40dm100c.txt
TEXT -904 2152 Left 0 ;HeatSink: HS 10425
TEXT -928 -200 Left 2 !.param l_par { 5n }
TEXT -1304 2616 Left 2 ;Using Infinion's Optimos model, with thermal feedback.
TEXT 3272 416 Left 2 !.lib p_v10p15.txt
TEXT -928 -136 Left 2 ;; Reference: https://e2e.ti.com/blogs_/b/powerhouse/posts/calculate-an-r-c-snubber-in-seven-steps\n \n\n;37.44186 MHz with no capacitor\nf0 = 37.44e6\n \n;14 MHz with 10n capacitor\nf1 = 14e6\nc1 = 10e-9\n \n; \nm = f0 / f1\n \nl = (m**2 -1) / ( ( (2*3.1415*f0)**2 ) * c1)\n \ncs = 3*c0\nrs = (l / c0)**(1/2)
TEXT -120 248 Left 2 !.step param Rsnb list 1 100
TEXT -120 272 Left 2 !.step param Csnb list 1n 10n
TEXT -128 224 Left 2 !.model MYSW SW(Ron=1p Roff=100Meg Vt=.5 Vh=-.4)
TEXT -120 296 Left 2 !.step param D_snb list -10 10
RECTANGLE Normal -320 1040 -784 704 2
RECTANGLE Normal -432 2544 -1536 1472 2
RECTANGLE Normal -992 320 -1536 688 2
RECTANGLE Normal -1536 1344 -800 704 2
RECTANGLE Normal -320 688 -944 -224 2
RECTANGLE Normal 768 2848 -400 1472 2
