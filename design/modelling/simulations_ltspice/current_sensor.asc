Version 4
SHEET 1 3836 3988
WIRE -1344 368 -1360 368
WIRE -1184 368 -1200 368
WIRE -624 400 -624 384
WIRE -496 400 -496 384
WIRE -1440 416 -1488 416
WIRE -1360 416 -1360 368
WIRE -1360 416 -1440 416
WIRE -1184 416 -1184 368
WIRE -1152 416 -1184 416
WIRE -1120 416 -1152 416
WIRE -1152 448 -1152 416
WIRE -1488 464 -1488 416
WIRE -1360 464 -1360 416
WIRE -1344 464 -1360 464
WIRE -1184 464 -1184 416
WIRE -1184 464 -1200 464
WIRE -624 480 -640 480
WIRE -496 480 -512 480
WIRE -624 496 -624 480
WIRE -496 496 -496 480
WIRE 288 528 64 528
WIRE 592 528 352 528
WIRE -1488 560 -1488 496
WIRE -1152 560 -1152 528
WIRE -1152 560 -1488 560
WIRE -1120 560 -1152 560
WIRE -624 576 -624 560
WIRE -496 576 -496 560
WIRE 464 576 448 576
WIRE 464 592 464 576
WIRE 64 640 64 528
WIRE 96 640 64 640
WIRE 160 640 128 640
WIRE 176 640 160 640
WIRE 304 640 272 640
WIRE 320 640 304 640
WIRE 352 640 320 640
WIRE 416 640 384 640
WIRE 448 640 448 576
WIRE 448 640 416 640
WIRE 464 640 448 640
WIRE 576 640 544 640
WIRE 592 640 592 528
WIRE 592 640 576 640
WIRE 64 672 64 640
WIRE 592 672 592 640
WIRE 192 752 192 672
WIRE 256 752 256 672
WIRE 464 752 464 672
WIRE 528 752 528 672
WIRE -880 768 -1008 768
WIRE -656 768 -688 768
WIRE -560 768 -576 768
WIRE -144 784 -192 784
WIRE -80 784 -144 784
WIRE 64 784 64 752
WIRE 64 784 -80 784
WIRE 592 784 592 752
WIRE 752 784 592 784
WIRE 832 784 752 784
WIRE 880 784 832 784
WIRE -1008 800 -1008 768
WIRE 832 800 832 784
WIRE -560 816 -560 768
WIRE -144 816 -144 784
WIRE -80 832 -80 816
WIRE -64 832 -80 832
WIRE 752 832 752 816
WIRE 752 832 736 832
WIRE -64 864 -80 864
WIRE 752 864 736 864
WIRE -336 912 -384 912
WIRE -304 912 -336 912
WIRE -192 912 -224 912
WIRE -160 912 -192 912
WIRE -144 912 -144 880
WIRE -144 912 -160 912
WIRE -80 912 -80 864
WIRE 112 912 -80 912
WIRE 224 912 192 912
WIRE 320 912 320 640
WIRE 320 912 304 912
WIRE 336 912 320 912
WIRE 432 912 416 912
WIRE 752 912 752 864
WIRE 752 912 512 912
WIRE 832 912 832 864
WIRE 848 912 832 912
WIRE 880 912 848 912
WIRE 992 912 960 912
WIRE 1008 912 992 912
WIRE 1040 912 1008 912
WIRE -1008 928 -1008 880
WIRE -880 928 -1008 928
WIRE -560 928 -560 896
WIRE -560 928 -688 928
WIRE 1008 944 1008 912
WIRE -336 992 -336 912
WIRE -272 992 -336 992
WIRE -192 992 -192 912
WIRE -192 992 -240 992
WIRE 848 992 848 912
WIRE 896 992 848 992
WIRE 992 992 992 912
WIRE 992 992 928 992
WIRE -272 1040 -272 992
WIRE -240 1040 -240 992
WIRE 896 1040 896 992
WIRE 928 1040 928 992
WIRE -400 1072 -432 1072
WIRE -288 1072 -320 1072
WIRE -160 1072 -224 1072
WIRE 880 1072 816 1072
WIRE 976 1072 944 1072
WIRE 432 1136 432 1088
WIRE -256 1184 -256 1104
WIRE 912 1184 912 1104
WIRE 432 1264 432 1216
FLAG -1120 416 G
FLAG -1120 560 S
FLAG -624 576 D
FLAG -624 384 S
FLAG -496 576 A
FLAG -496 384 K
FLAG -384 912 IN+
IOPIN -384 912 In
FLAG -192 784 IN-
IOPIN -192 784 In
FLAG 160 640 S
FLAG 304 640 D
FLAG 1040 912 OUT-
IOPIN 1040 912 In
FLAG 880 784 OUT+
IOPIN 880 784 In
FLAG 416 640 A
FLAG 576 640 K
FLAG 1008 944 0
FLAG 192 592 G
FLAG -880 768 IN+
IOPIN -880 768 In
FLAG -880 928 IN-
IOPIN -880 928 In
FLAG -688 928 OUT-
IOPIN -688 928 In
FLAG -688 768 OUT+
IOPIN -688 768 In
FLAG -1440 416 driver_out
FLAG 256 752 M1Tj
FLAG 528 752 M2Tj
FLAG 192 752 M1Case_
FLAG 464 752 M1Case_
FLAG -640 480 snb_M1
FLAG -512 480 snb_M2
FLAG 976 1072 0
FLAG 432 1264 0
FLAG 432 1088 Vcc
FLAG 816 1072 Vcc
FLAG 912 1184 Vibat
FLAG -432 1072 0
FLAG -160 1072 Vcc
FLAG -256 1184 Vipan
SYMBOL diode -1344 480 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL diode -1200 352 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL res -1184 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 4.7
SYMBOL res -1248 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 4.7
SYMBOL res -1168 432 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res -576 800 R0
SYMATTR InstName Rout
SYMATTR Value {Ro}
SYMBOL res -640 384 R0
SYMATTR InstName Rs_M1
SYMATTR Value {Rs}
SYMBOL cap -640 496 R0
SYMATTR InstName Cs_M1
SYMATTR Value {Cs}
SYMATTR SpiceLine Rser={Cs_esr}
SYMBOL ind2 80 656 M0
SYMATTR InstName Li
SYMATTR Value {Li}
SYMATTR SpiceLine Rser={Li_esr} Ic={Ii}
SYMATTR Type ind
SYMBOL cap -128 816 M0
SYMATTR InstName Ci
SYMATTR Value 100µ
SYMATTR SpiceLine Rser={Ci_esr}
SYMBOL ind2 576 656 R0
SYMATTR InstName Lo
SYMATTR Value {Lo}
SYMATTR SpiceLine Rser={Lo_esr} Ic={-Io}
SYMATTR Type ind
SYMBOL cap 848 800 M0
SYMATTR InstName Co
SYMATTR Value {Co}
SYMATTR SpiceLine Rser={Co_esr}
SYMBOL cap 352 544 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName Cc
SYMATTR Value {Cc}
SYMATTR SpiceLine Rser={Cc_esr} Ic={Vo+Vi}
SYMBOL res 976 896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RshuntOut
SYMATTR Value 1500µ
SYMBOL res -320 928 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RshuntIn
SYMATTR Value 1000µ
SYMBOL MiniSyms4\\voltage- -1488 480 R0
WINDOW 3 -18 -90 VRight 0
WINDOW 123 0 0 Left 0
WINDOW 39 7 17 Left 0
SYMATTR Value PULSE(0 15 0 1n 1n {D*Tsw} {Tsw})
SYMATTR SpiceLine Rser=100m Cpar=100n
SYMATTR InstName Driver
SYMBOL MiniSyms4\\res- -80 800 R180
WINDOW 3 9 -8 Left 0
WINDOW 0 13 9 Center 0
SYMATTR Value 10k
SYMATTR InstName R12
SYMBOL MiniSyms4\\res- -80 848 R180
WINDOW 3 9 -8 Left 0
WINDOW 0 13 9 Center 0
SYMATTR Value 1k
SYMATTR InstName R15
SYMBOL MiniSyms4\\res- 752 800 R180
WINDOW 3 9 -8 Left 0
WINDOW 0 13 9 Center 0
SYMATTR Value 47k
SYMATTR InstName R27
SYMBOL MiniSyms4\\res- 752 848 R180
WINDOW 3 9 -8 Left 0
WINDOW 0 13 9 Center 0
SYMATTR Value 1k
SYMATTR InstName R28
SYMBOL voltage -1008 784 R0
WINDOW 0 32 56 VTop 2
WINDOW 3 4 56 VTop 2
WINDOW 123 0 0 Left 0
SYMATTR InstName Vin
SYMATTR Value 30
SYMATTR SpiceLine Rser=0 Cpar=0
SYMBOL voltage -672 768 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 4 56 VTop 2
WINDOW 123 0 0 Left 0
SYMATTR InstName Out
SYMATTR Value 0
SYMATTR SpiceLine Rser=0 Cpar=0
SYMBOL MiniSyms4\\voltage- 112 640 R90
WINDOW 3 7 17 Left 0
WINDOW 123 0 0 Left 0
SYMATTR Value 0
SYMATTR SpiceLine Rser=0 Cpar=0
SYMATTR InstName M1
SYMBOL MiniSyms4\\voltage- 368 640 R90
WINDOW 3 7 17 Left 0
WINDOW 123 0 0 Left 0
SYMATTR Value 0
SYMATTR SpiceLine Rser=0 Cpar=0
SYMATTR InstName M2
SYMBOL optimos_5 272 592 R90
WINDOW 3 98 151 Left 2
SYMATTR Value IPT063N15N5
SYMATTR InstName U1
SYMBOL optimos_5 544 592 R90
WINDOW 3 98 151 Left 2
SYMATTR Value IPT063N15N5
SYMATTR InstName U2
SYMBOL res -512 384 R0
SYMATTR InstName Rs_M2
SYMATTR Value {Rs}
SYMBOL cap -512 496 R0
SYMATTR InstName Cs_M2
SYMATTR Value {Cs}
SYMATTR SpiceLine Rser={Cs_esr}
SYMBOL voltage 432 1120 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 3.3
SYMBOL ina293a4 848 1072 M90
SYMATTR InstName U3
SYMATTR Value INA293A4
SYMBOL ina293a4 -192 1072 R90
SYMATTR InstName U4
SYMATTR Value INA293A4
SYMBOL res 528 896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 0.1
SYMBOL res 320 896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 0.1
SYMBOL res 848 896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 0.1
SYMBOL res -64 896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 0.1
SYMBOL ind 208 896 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L1
SYMATTR Value 1µ
SYMBOL ind 432 896 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L2
SYMATTR Value 1µ
SYMBOL res -304 1056 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 0.1
TEXT -728 1208 Left 2 !.param tstart {0}\n.param tend {1m}\n.tran 0 {tend} {tstart}
TEXT 160 368 Left 2 ;OUT- Standard Floating Half-Bridge
TEXT -1344 736 Right 2 !.include pvlib.cir
TEXT -1504 968 Left 2 !.param G=1000\n;.step param G list 200 400 600 800 1000 1200
TEXT -1504 1064 Left 2 !; Optimal Operating Point: MPPT\n.param Vi 30\n.param Ii 8\n.param Pi 300\n.param Ri {Vi/Ii}\n.param Eff=1\n.param Po {Eff * Pi}\n.param Vo {(Po * Ro)**(1/2)}\n.param Io {Vo / Ro}\n.param D={(Vo/(Vi+Vo))}
TEXT -768 976 Left 2 !.param RO 7\n;.step param RO list 0.5 1 4 20 30 100
TEXT -1512 592 Left 2 !;.step param fsw list 40e3 100e3 200e3\n.param fsw=400e3 ; -> optimized for efficiency!\n.param Tsw {1/fsw}
TEXT 1056 480 Left 2 !; Third Experiment - Varying those with the highest impact on efficiency\n;.param Co 4.7u ; Fixed because its impact is very low\n \n;.step param Li list 10u 22u 33u\n;.step param Cc list 1u 2.2u 4.7u\n;.step param Lo list 10u 22u 33u 47u\n \n;.param Li 22u; ->  Optimized for efficiency! \n;.param Cc 1u; -> Optimized for efficiency!\n;.param Lo 47u ; -> Optimized for efficiency!\n \n; Result @ 40khz: (22uH, 1uF, 47uH) is 8.42% better than (33uH, 2.2uF, 10uH)\n; Result @ 100khz: (10uH, 1uF, 10uH) is 4.34% better than (33uH, 1uF, 33uH)\n \n;.step param L list 33u 22u 10u\n.param L 22u\n.param Li {L};\n.param Lo {L};\n.param Cc 10u;\n.param Co 100u;\n \n.param Li_esr 10m;\n.param Lo_esr 10m;\n.param Ci_esr 10m;\n.param Cc_esr 2m;\n.param Co_esr 10m;
TEXT 2352 -176 Left 2 !;.inc FDMS86255.lib\n.inc OptiMOS3_150V_LTSpice.lib\n.inc OptiMOS5_150V_LTSpice.lib\n.inc PTNG_150V_std_rev3p6_ltspice.txt
TEXT 2360 -24 Left 2 ;BSB165N15NZ3\nBSB280N15NZ3\nBSC074N15NS5\nBSC074N15NS5\nBSC093N15NS5\nBSC093N15NS5\nBSC110N15NS5\nBSC110N15NS5\nBSC160N15NS5\nBSC160N15NS5\nBSC190N15NS3\nBSC360N15NS3\nBSC520N15NS3\nBSZ300N15NS5\nBSZ300N15NS5\nBSZ520N15NS3\nBSZ900N15NS3\nFDMS8D8N15C_3p\nFDMS8D8N15C_5p\nIPA075N15N3\nIPA105N15N3\nIPB044N15N5\nIPB044N15N5\nIPB048N15N5\nIPB048N15N5\nIPB048N15N5LF\nIPB060N15N5\nIPB060N15N5\nIPB065N15N3\nIPB072N15N3\nIPB073N15N5\nIPB073N15N5\nIPB083N15N5LF\nIPB108N15N3\nIPB200N15N3\nIPB530N15N3\nIPD200N15N3\nIPD530N15N3\nIPI051N15N5\nIPI051N15N5\nIPI075N15N3\nIPI076N15N5\nIPI076N15N5\nIPI111N15N3\nIPI200N15N3\nIPI530N15N3\nIPP051N15N5\nIPP051N15N5\nIPP075N15N3\nIPP076N15N5\nIPP076N15N5\nIPP111N15N3\nIPP200N15N3\nIPP530N15N3\nIPT039N15N5\nIPT039N15N5\nIPT044N15N5\nIPT044N15N5\nIPT054N15N5\nIPT054N15N5\nIPT059N15N3\nIPT063N15N5\nIPT063N15N5\nNTB011N15MC_3P\nNTB011N15MC_5P\nNTB5D0N15MC_3P\nNTB5D0N15MC_5P\nNTB7D3N15MC_3P\nNTB7D3N15MC_5P\nNTBGS4D1N15MC_3P\nNTBGS4D1N15MC_5P\nNTBGS6D5N15MC_3P\nNTBGS6D5N15MC_5P\nNTDS015N15MC_3P\nNTDS015N15MC_5P\nNTMFS011N15MC_3P\nNTMFS011N15MC_5P\nNTMFS015N15MC_3P\nNTMFS015N15MC_5P\nNTMFS022N15MC_3P\nNTMFS022N15MC_5P\nNTMFS034N15MC_3P\nNTMFS034N15MC_5P\nNTMFS7D5N15MC_3P\nNTMFS7D5N15MC_5P\nNTMFSC012N15MC_3P\nNTMFSC012N15MC_5P\nNTMTS4D3N15MC_3P\nNTMTS4D3N15MC_5P\nNTP011N15MC_3P\nNTP011N15MC_5P\nNTP5D0N15MC_3P\nNTP5D0N15MC_5P\nNTP7D3N15MC_3P\nNTP7D3N15MC_5P\nNTTFS022N15MC_3P\nNTTFS022N15MC_5P\nNTTFS034N15MC_3P\nNTTFS034N15MC_5P\nNVBGS4D1N15MC_3P\nNVBGS4D1N15MC_5P\nNVBGS6D5N15MC_3P\nNVBGS6D5N15MC_5P\nNVBLS4D0N15MC_3P\nNVBLS4D0N15MC_5P\nNVDS015N15MC_3P\nNVDS015N15MC_5P
TEXT -1504 776 Left 2 !.param Voc 24.9\n.param Isc 9.65\n.param Vmp 20.3\n.param Imp 8.75\n.param tk_voc -0.0031\n.param tk_isc 0.0005
TEXT -904 392 Left 2 !.param Rs {1}\n.param Cs {1n}\n.param Cs_esr {3m}
TEXT 2360 -208 Left 2 !.lib C:\\users\\alejopm\\Favorites\\alejopm\\zenite\\MCC22\\design\\modelling\\simulations_ltspice\\sensors\\ina293a4\\ina293a4.lib
RECTANGLE Normal -320 1040 -784 704 2
RECTANGLE Normal -992 320 -1536 688 2
RECTANGLE Normal -1536 1344 -800 704 2
RECTANGLE Normal -320 688 -976 320 2
